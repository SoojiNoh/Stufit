<h5 class="center">전공 스토리</h5>

<!--search -->
<div class="container">
  <%= form_tag major_stories_path, :method => 'get', :id => "activities_search", :style=>"margin-top:50px" do %>
    <%= hidden_field_tag :direction, params[:direction]%>
    <%= hidden_field_tag :sort, params[:sort]%>
    <p>
      <%= text_field_tag :search, params[:search], :placeholder=>"검색어를 입력하세요" %>
    <div><%= submit_tag "검색", :content => nil, class: 'waves-effect waves-light btn blue' %></div>
    </p>
  <% end %>
</div>

<!-- Square card -->

<div class="row">
<% @major_stories.each do |major_story| %>
  <div class="col s3 m3 l3">
    <div class="card">
      <div class="card-image">
      <%= link_to major_story_path(major_story) do %>
          <%= image_tag "#{major_story.file}", :size => '250x250' %>
      </div>
        <div class="card-content">
          <p><%= major_story.univ %></p>
          <p><strong><%= major_story.major %></strong></p>
        </div>
        <div class="card-action">

          <!-- like function -->
          <% if user_signed_in? %>
            <% if current_user.is_major_like?(major_story) %>
              <%= link_to image_tag("/assets/heart.png"), major_story_major_story_like_path(major_story), method: "post" %>
            <% else %>
              <%= link_to image_tag("/assets/heart_empty.png"), major_story_major_story_like_path(major_story), method: "post" %>
            <% end %>
            <%= major_story.major_story_likes.size %>
          <% else %>
          <%= image_tag("/assets/heart_empty.png") %>
          <%= major_story.major_story_likes.size %>
          <%end%>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
</div><br>

<!-- 전공추가 버튼-->
<div align="right" style="margin-top:10px; margin-bottom:20px;">
  <%= link_to '전공추가', new_major_story_path, class: 'waves-effect waves-light btn blue' %>
</div><br>

<!--Pagination -->
<div align="center">
  <%= will_paginate @major_stories, previous_lable: "이전", next_lable: "다음"%>
</div>
